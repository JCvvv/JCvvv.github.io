<!DOCTYPE html><html lang="zh" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>数据库课程设计 | 锦尘</title><meta name="keywords" content="数据库,课设"><meta name="author" content="锦尘"><meta name="copyright" content="锦尘"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="数据库暑期课设，在这里更新开发日志">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库课程设计">
<meta property="og:url" content="https://jcvvv.github.io/2023/07/11/Database%20coursework/index.html">
<meta property="og:site_name" content="锦尘">
<meta property="og:description" content="数据库暑期课设，在这里更新开发日志">
<meta property="og:locale">
<meta property="og:image" content="https://jcvvv.github.io/pic/cover/27.jpg">
<meta property="article:published_time" content="2023-07-10T16:00:00.000Z">
<meta property="article:modified_time" content="2023-11-01T11:39:17.174Z">
<meta property="article:author" content="锦尘">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="课设">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jcvvv.github.io/pic/cover/27.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://jcvvv.github.io/2023/07/11/Database%20coursework/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '数据库课程设计',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-01 19:39:17'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/pic/cover/27.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">锦尘</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa-solid fa-image"></i><span> 图库</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">数据库课程设计</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-10T16:00:00.000Z" title="发表于 2023-07-11 00:00:00">2023-07-11</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-01T11:39:17.174Z" title="更新于 2023-11-01 19:39:17">2023-11-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3,888</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>13分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="数据库课程设计"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="课程要求"><a href="#课程要求" class="headerlink" title="课程要求"></a>课程要求</h2><h3 id="数据库课程设计课程定位"><a href="#数据库课程设计课程定位" class="headerlink" title="数据库课程设计课程定位"></a>数据库课程设计课程定位</h3><ul>
<li>数据库课程设计的目的是让学生在掌握数据库的相关理论知识后，将数据库与软件开发相结合，熟练掌握数据库设计和基于数据库的应用程序开发</li>
<li>课程要求学生选用主流DBMS，自选某种高级程序设计语言，实现一个完整的以数据库为核心的应用系统。开发工具和系统体系结构由学生自选</li>
</ul>
<h3 id="数据库课程设计目标"><a href="#数据库课程设计目标" class="headerlink" title="数据库课程设计目标"></a>数据库课程设计目标</h3><ul>
<li>在仿真实战环境下开发一个以产品化为导向的基于数据库的应用系统</li>
<li>掌握设计实现一个完整的产品化导向的数据库应用系统的流程和方法，包括需求分析、数据库设计、应用程序设计、编码、测试等</li>
<li>熟悉对数据库的操作，包括数据库连接、SQL、完整性约束、索引，以及视图、触发器、存储过程等数据库对象的综合运用**</li>
<li>加深理论基础：关系数据库、数据库设计、事务</li>
<li>加强开发工具使用、编程经验、交流能力</li>
</ul>
<h3 id="成绩评定"><a href="#成绩评定" class="headerlink" title="成绩评定"></a>成绩评定</h3><ul>
<li>第一次课堂演讲—系统需求分析与设计：30分<br>功能方面需求分析（10分）、性能及其他需求分析（5分）、数据库设计（15分）</li>
<li>第二次课堂演讲—系统演示(30分)<br>在课堂演示自己的系统，每位同学演示自己最有代表性的三个功能(不包括系统登录和系统退出功能)<br>功能（15分）、健壮性（10分）、易用性（5分）</li>
<li>课程设计报告40分(国庆节放假后上传至FTP服务器)<br>数据库概念设计和逻辑设计（20分）、数据库规划、系统定义、需求分析（15分）、物理设计和其他（5分）</li>
</ul>
<h2 id="微信小程序课程设计报告"><a href="#微信小程序课程设计报告" class="headerlink" title="微信小程序课程设计报告"></a>微信小程序课程设计报告</h2><p>班级：大数据2班       学号：202100300067      姓名：李景宸 </p>
<h2 id="一、系统开发平台"><a href="#一、系统开发平台" class="headerlink" title="一、系统开发平台"></a>一、系统开发平台</h2><ul>
<li>前端: UniApp + Vue 构建微信小程序</li>
<li>后端: SpringBoot + MyBatis&#x2F;JPA </li>
<li>数据库: MySQL</li>
<li>缓存: Redis 实现消息队列</li>
<li>鉴权: JWT 进行用户鉴权</li>
<li>部署: 微信小程序 + 华为云耀云服务器</li>
<li>编译器：微信云开发 + HBuilderX + IDEA</li>
</ul>
<h2 id="二、数据库规划"><a href="#二、数据库规划" class="headerlink" title="二、数据库规划"></a>二、数据库规划</h2><h3 id="2-1-任务陈述"><a href="#2-1-任务陈述" class="headerlink" title="2.1  任务陈述"></a>2.1  任务陈述</h3><p>本课程设计的任务是开发一个论坛微信小程序及其后台管理系统。论坛小程序可以让用户发帖、回帖、点赞、收藏等,实现用户之间的交流。后台管理系统可以管理用户、帖子、违规内容等,保证论坛的正常运转。开发这个项目的目的是练习使用UniApp、Vue、SpringBoot、MySQL等技术,并综合运用所学知识开发微信小程序和后台管理系统。通过完成这个项目,可以提高自己的编码和开发能力,为今后从事开发工作打下基础。</p>
<h3 id="2-2-任务目标"><a href="#2-2-任务目标" class="headerlink" title="2.2  任务目标"></a>2.2  任务目标</h3><ul>
<li>用户可通过微信小程序注册登录、发帖回帖、点赞收藏等</li>
<li>实现帖子列表、详情、搜索等功能</li>
<li>后台可管理用户、帖子、违规内容等</li>
</ul>
<h2 id="三、系统定义"><a href="#三、系统定义" class="headerlink" title="三、系统定义"></a>三、系统定义</h2><h3 id="3-1-系统边界"><a href="#3-1-系统边界" class="headerlink" title="3.1  系统边界"></a>3.1  系统边界</h3><ul>
<li>用户端:微信小程序,实现论坛功能</li>
<li>管理端:后台管理系统,管理用户、帖子等数据</li>
<li>数据存储:MySQL数据库,存储用户、帖子、评论等数据</li>
<li>身份认证:使用JWT实现用户认证</li>
<li>接口服务:SpringBoot提供接口服务</li>
<li>消息队列:使用Redis实现消息队列</li>
<li>部署环境:微信小程序 + 华为云服务器</li>
</ul>
<h3 id="3-2-用户视图"><a href="#3-2-用户视图" class="headerlink" title="3.2  用户视图"></a>3.2  用户视图</h3><p>普通用户视图</p>
<ul>
<li>注册&#x2F;登录:可以通过微信快速注册和登录小程序</li>
<li>发帖:在指定分类下发表帖子</li>
<li>回帖:在帖子下进行回复讨论</li>
<li>点赞收藏:对感兴趣的帖子进行点赞或收藏</li>
<li>查看帖子:可以查看不同分类下的帖子列表或搜索帖子</li>
<li>个人中心:可以查看和编辑自己的个人信息</li>
</ul>
<p>管理员视图</p>
<ul>
<li>登录系统:管理员需要通过账号密码登录后台系统</li>
<li>用户管理:可以查看所有用户,也可以封禁不良用户</li>
<li>帖子管理:可以浏览、删除、修改所有帖子</li>
<li>词库管理:可以增加违规关键词</li>
<li>数据统计:可以查看各种数据统计图表,如用户量变化、活跃度等</li>
</ul>
<h2 id="四、需求分析"><a href="#四、需求分析" class="headerlink" title="四、需求分析"></a>四、需求分析</h2><h3 id="4-1-用户需求说明"><a href="#4-1-用户需求说明" class="headerlink" title="4.1 用户需求说明"></a>4.1 用户需求说明</h3><h4 id="4-1-1-数据需求"><a href="#4-1-1-数据需求" class="headerlink" title="4.1.1 数据需求"></a>4.1.1 数据需求</h4><ul>
<li><p>用户表(User):存储用户信息,包括微信openid、头像、用户名等基本信息。注意openid和用户名的唯一性。</p>
</li>
<li><p>帖子表(Post):存储帖子信息,包括标题、内容、作者等。注意作者须关联用户表,一篇帖子对应一个用户。</p>
</li>
<li><p>收藏表(Favorite):存储用户的收藏记录,包括收藏的帖子。注意用户和帖子的关联关系。</p>
</li>
<li><p>关注表(Follow):存储用户之间的关注记录,包括谁关注了谁。注意避免重复关注。</p>
</li>
<li><p>评论表(Reply):存储帖子下的回复评论,包括评论内容和所属的帖子。注意评论与帖子和用户的关联。</p>
</li>
<li><p>管理员表(Administrator):存储管理员信息,包括账号和密码。注意账号的唯一性。</p>
</li>
<li><p>违规词表(Word):存储违规关键词,用于帖子审核。</p>
</li>
</ul>
<p>需要根据业务需要设计表关系,如一篇帖子可以有多条评论,一个用户可以收藏多篇帖子等。</p>
<h4 id="4-1-2-事务需求"><a href="#4-1-2-事务需求" class="headerlink" title="4.1.2 事务需求"></a>4.1.2 事务需求</h4><ul>
<li>用户注册 - 新增用户信息到数据库</li>
<li>用户登录 - 查询用户信息,验证登录</li>
<li>发布帖子 - 新增帖子信息到数据库</li>
<li>点赞帖子 - 更新帖子的点赞数</li>
<li>收藏帖子 - 新增收藏记录到数据库</li>
<li>发表评论 - 新增评论信息到数据库 </li>
<li>用户关注 - 新增关注记录到数据库</li>
<li>加载帖子 - 从数据库查询帖子信息</li>
<li>加载评论 - 从数据库查询评论信息</li>
<li>搜索帖子 - 根据标题关键词搜索帖子</li>
<li>封禁用户 - 更新用户状态为封禁</li>
<li>删除帖子 - 从数据库删除帖子</li>
<li>统计分析 - 从数据库统计各种数据</li>
</ul>
<p>这些都是系统需要完成的主要事务处理。发布、评论、收藏等用户操作要新增数据;加载、搜索、统计等要查询数据库。</p>
<h3 id="4-2-系统需求说明"><a href="#4-2-系统需求说明" class="headerlink" title="4.2 系统需求说明"></a>4.2 系统需求说明</h3><ul>
<li><p>数据库初始大小:考虑到初期用户量和数据量不大,数据库可先规划为1GB左右。</p>
</li>
<li><p>用户增长速度:按每月新增用户1000计,每月帖子量新增2000计。</p>
</li>
<li><p>安全性:用户密码需加密存储,接口请求需认证,防止注入攻击。</p>
</li>
<li><p>接口性能:重点接口如发帖、评论等耗时需控制在200ms以内,确保响应速度。</p>
</li>
<li><p>图片存储:上传图片可先存储在服务器,也可以使用云存储服务。</p>
</li>
<li><p>容灾考虑:数据库可配置主从复制,Redis和应用服务器考虑搭建集群。</p>
</li>
<li><p>扩展性:数据库和存储可按需水平扩展,缓存和应用服务器也可以横向扩展。</p>
</li>
</ul>
<p>需要根据实际情况评估需求,给数据库和服务器提前留足扩展空间,应对未来增长。</p>
<h2 id="五、数据库逻辑设计"><a href="#五、数据库逻辑设计" class="headerlink" title="五、数据库逻辑设计"></a>五、数据库逻辑设计</h2><h3 id="5-1-ER图"><a href="#5-1-ER图" class="headerlink" title="5.1 ER图"></a>5.1 ER图</h3><p><img src="/pic/Datebase coursework/0.png" width="90%"></p>
<h3 id="5-2-数据字典"><a href="#5-2-数据字典" class="headerlink" title="5.2 数据字典"></a>5.2 数据字典</h3><p>根据ER图和数据库设计,数据字典如下:</p>
<table>
<thead>
<tr>
<th>表名</th>
<th>字段名</th>
<th>字段类型</th>
<th>可否为空</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>User</td>
<td>user_id</td>
<td>int</td>
<td>否</td>
<td>用户ID,主键</td>
</tr>
<tr>
<td>User</td>
<td>openid</td>
<td>varchar</td>
<td>否</td>
<td>用户的微信开放ID</td>
</tr>
<tr>
<td>User</td>
<td>nickname</td>
<td>varchar</td>
<td>否</td>
<td>用户昵称</td>
</tr>
<tr>
<td>User</td>
<td>avatar</td>
<td>varchar</td>
<td>是</td>
<td>用户头像</td>
</tr>
<tr>
<td>User</td>
<td>register_date</td>
<td>datetime</td>
<td>否</td>
<td>注册时间</td>
</tr>
<tr>
<td>User</td>
<td>last_login</td>
<td>datetime</td>
<td>是</td>
<td>最后登录时间</td>
</tr>
<tr>
<td>User</td>
<td>status</td>
<td>tinyint</td>
<td>否</td>
<td>用户状态</td>
</tr>
<tr>
<td>Post</td>
<td>post_id</td>
<td>int</td>
<td>否</td>
<td>帖子ID,主键</td>
</tr>
<tr>
<td>Post</td>
<td>title</td>
<td>varchar</td>
<td>否</td>
<td>帖子标题</td>
</tr>
<tr>
<td>Post</td>
<td>content</td>
<td>text</td>
<td>否</td>
<td>帖子内容</td>
</tr>
<tr>
<td>Post</td>
<td>openid</td>
<td>varchar</td>
<td>否</td>
<td>发帖用户ID</td>
</tr>
<tr>
<td>Post</td>
<td>post_time</td>
<td>datetime</td>
<td>否</td>
<td>发帖时间</td>
</tr>
<tr>
<td>Post</td>
<td>type</td>
<td>tinyint</td>
<td>否</td>
<td>帖子类型</td>
</tr>
<tr>
<td>Reply</td>
<td>reply_id</td>
<td>int</td>
<td>否</td>
<td>回复ID</td>
</tr>
<tr>
<td>Reply</td>
<td>post_id</td>
<td>int</td>
<td>否</td>
<td>帖子ID</td>
</tr>
<tr>
<td>Reply</td>
<td>user_id</td>
<td>int</td>
<td>否</td>
<td>用户ID</td>
</tr>
<tr>
<td>Reply</td>
<td>content</td>
<td>varchar</td>
<td>否</td>
<td>回复内容</td>
</tr>
<tr>
<td>Reply</td>
<td>last_user_id</td>
<td>int</td>
<td>否</td>
<td>上条回复ID</td>
</tr>
<tr>
<td>Favorite</td>
<td>id</td>
<td>int</td>
<td>否</td>
<td>收藏ID</td>
</tr>
<tr>
<td>Favorite</td>
<td>post_id</td>
<td>int</td>
<td>否</td>
<td>帖子ID</td>
</tr>
<tr>
<td>Favorite</td>
<td>user_id</td>
<td>int</td>
<td>否</td>
<td>用户ID</td>
</tr>
</tbody></table>
<h3 id="5-3-关系表"><a href="#5-3-关系表" class="headerlink" title="5.3 关系表"></a>5.3 关系表</h3><p>根据你提供的ER图和数据库设计,主要的关系表分析如下:</p>
<ol>
<li>收藏表(Favorite)</li>
</ol>
<ul>
<li>该表建立了用户和帖子之间的收藏关系。</li>
<li>用户可以收藏多个帖子,帖子可以被多个用户收藏。</li>
<li>所以它的两个外键分别关联用户表(User)和帖子表(Post)。</li>
</ul>
<ol start="2">
<li>关注表(Follow)</li>
</ol>
<ul>
<li>该表建立了用户之间的关注关系。</li>
<li>每个用户可以关注或被关注多个用户。</li>
<li>所以它的两个外键都关联的是用户表(User)。</li>
</ul>
<ol start="3">
<li>评论表(Reply)</li>
</ol>
<ul>
<li>该表存储对帖子的评论。</li>
<li>每条评论属于一个帖子和一个发表评论的用户。</li>
<li>外键关联帖子表(Post)和用户表(User)。</li>
</ul>
<ol start="4">
<li>管理员表(Administrator)</li>
</ol>
<ul>
<li>该表存储管理员信息,与其他表关系不大。</li>
</ul>
<h2 id="六、数据库物理设计"><a href="#六、数据库物理设计" class="headerlink" title="六、数据库物理设计"></a>六、数据库物理设计</h2><h3 id="6-1-索引"><a href="#6-1-索引" class="headerlink" title="6.1 索引"></a>6.1 索引</h3><p>用户表(User):</p>
<ul>
<li>在openid字段创建唯一索引,加速根据openid查询用户信息</li>
</ul>
<p>帖子表(Post):</p>
<ul>
<li>在post_id字段创建主键索引,加速主键查询</li>
<li>在title字段创建普通索引,加速根据标题搜索帖子</li>
</ul>
<p>评论表(Reply):</p>
<ul>
<li>在post_id字段创建普通索引,加速根据帖子id查询评论</li>
<li>在user_id字段创建普通索引,加速根据用户id查询评论</li>
</ul>
<p>收藏表(Favorite):</p>
<ul>
<li>在user_id和post_id创建复合索引,加速根据用户id和帖子id查询收藏关系</li>
</ul>
<p>关注表(Follow):</p>
<ul>
<li>在user_id和followed_user_id建立复合索引,加速查询关注关系</li>
</ul>
<h3 id="6-2-视图"><a href="#6-2-视图" class="headerlink" title="6.2 视图"></a>6.2 视图</h3><ol>
<li>用户视图</li>
</ol>
<ul>
<li><p>注册&#x2F;登录视图:使用微信授权登录,无需注册即可使用。</p>
</li>
<li><p>个人主页视图:显示用户信息,发布的帖子,关注人等。 </p>
</li>
<li><p>用户管理视图:提供修改资料,更改密码等功能。</p>
</li>
</ul>
<ol start="2">
<li>帖子视图</li>
</ol>
<ul>
<li><p>发帖视图:创建帖子的输入框,支持文本、图片、视频等。</p>
</li>
<li><p>帖子列表视图:以列表形式展示帖子标题、作者等信息。</p>
</li>
<li><p>帖子详情视图:显示整个帖子的全文内容。</p>
</li>
</ul>
<ol start="3">
<li>评论视图</li>
</ol>
<ul>
<li><p>评论输入视图:在帖子下方提供评论输入框。</p>
</li>
<li><p>评论列表视图:展示对帖子的评论。</p>
</li>
</ul>
<ol start="4">
<li>管理员视图</li>
</ol>
<ul>
<li><p>用户管理视图:列表显示用户,可批量处理。  </p>
</li>
<li><p>帖子管理视图:可查看并筛选全部帖子,进行删除、封禁等操作。</p>
</li>
<li><p>数据统计视图:用图表呈现系统各类关键指标。</p>
</li>
</ul>
<h3 id="6-3-安全机制"><a href="#6-3-安全机制" class="headerlink" title="6.3 安全机制"></a>6.3 安全机制</h3><ol>
<li>用户认证</li>
</ol>
<ul>
<li>接入微信授权登录,验证用户身份</li>
<li>管理员账号使用用户名密码认证</li>
<li>对关键操作进行 TOKEN 验证</li>
</ul>
<ol start="2">
<li>数据加密</li>
</ol>
<ul>
<li>对用户密码、支付密钥等敏感数据加密存储</li>
<li>HTTPS 加密通信传输</li>
</ul>
<ol start="3">
<li>权限控制</li>
</ol>
<ul>
<li>不同用户角色设置不同访问权限 </li>
<li>匿名用户只能浏览,不能发帖等操作</li>
</ul>
<ol start="4">
<li>防注入</li>
</ol>
<ul>
<li>输入内容过滤,对特殊字符进行转义处理</li>
<li>参数校验,避免 SQL 注入等漏洞风险</li>
</ul>
<ol start="5">
<li>日志审计</li>
</ol>
<ul>
<li>记录用户操作日志,用于事后审计</li>
<li>对重要操作发送管理员提示</li>
</ul>
<ol start="6">
<li>内容审核</li>
</ol>
<ul>
<li>人工和自动双重审核机制,审查不良内容</li>
<li>建立黑名单词库,自动过滤</li>
</ul>
<h2 id="七、应用程序设计"><a href="#七、应用程序设计" class="headerlink" title="七、应用程序设计"></a>七、应用程序设计</h2><h3 id="7-1-功能模块"><a href="#7-1-功能模块" class="headerlink" title="7.1 功能模块"></a>7.1 功能模块</h3><table>
<thead>
<tr>
<th>模块</th>
<th>相关数据库表</th>
<th>主要功能</th>
</tr>
</thead>
<tbody><tr>
<td>用户管理</td>
<td>User</td>
<td>用户注册、登录、管理</td>
</tr>
<tr>
<td>帖子管理</td>
<td>Post</td>
<td>发帖、浏览帖子、搜索</td>
</tr>
<tr>
<td>评论管理</td>
<td>Reply</td>
<td>发表、浏览评论</td>
</tr>
<tr>
<td>收藏点赞</td>
<td>Favorite</td>
<td>用户收藏、帖子点赞</td>
</tr>
<tr>
<td>关系管理</td>
<td>Follow</td>
<td>用户关注、黑名单等</td>
</tr>
<tr>
<td>权限管理</td>
<td>Administrator</td>
<td>管理员的权限控制</td>
</tr>
<tr>
<td>内容审核</td>
<td>Word</td>
<td>屏蔽敏感词、检测违规</td>
</tr>
<tr>
<td>数据统计</td>
<td>多个表联合</td>
<td>数据报表、分析</td>
</tr>
</tbody></table>
<p>每个功能模块会涉及一个或多个数据库表,例如帖子模块需要访问Post表,评论需要访问Reply表。将系统划分为功能模块有助于梳理系统需求和设计数据库。</p>
<h3 id="7-2-事务设计"><a href="#7-2-事务设计" class="headerlink" title="7.2 事务设计"></a>7.2 事务设计</h3><ol>
<li><p>事务的粒度:每一个业务操作是否需要设计为一个事务,既保证原子性又不影响性能。</p>
</li>
<li><p>并发控制:可能引起数据不一致的并发操作,需要加锁或优化事务隔离级别。 </p>
</li>
<li><p>数据一致性:事务提交或回滚后应确保数据一致,避免数据损坏。</p>
</li>
<li><p>故障处理:系统故障时需要事务回滚,保证不将部分失败事务提交。</p>
</li>
<li><p>性能优化:合理设置事务大小,避免长事务影响性能。</p>
</li>
<li><p>日志记录:重要的事务操作需要留存日志,用于审计。</p>
</li>
<li><p>deadline控制:针对时效性强的事务,需要设置事务最长执行时间。</p>
</li>
<li><p>优先级划分:重要的事务可以优先执行,而非核心事务可以延后。</p>
</li>
<li><p>数据校验:事务中对数据的完整性、一致性进行校验。</p>
</li>
</ol>
<p>需要根据具体业务需求来设计事务,在保证数据一致性的前提下,优化事务的性能。</p>
<h2 id="八、测试和运行"><a href="#八、测试和运行" class="headerlink" title="八、测试和运行"></a>八、测试和运行</h2><p>用户端</p>
<p>1.推送帖子</p>
<p><img src="/pic/Datebase coursework/1.png" width="90%"></p>
<p>2.发帖</p>
<p><img src="/pic/Datebase coursework/2.png" width="90%"></p>
<p>3.个人中心</p>
<p><img src="/pic/Datebase coursework/3.png" width="90%"></p>
<p>4.历史记录</p>
<p><img src="/pic/Datebase coursework/4.png" width="90%"></p>
<p>5.评论区</p>
<p><img src="/pic/Datebase coursework/5.png" width="90%"></p>
<p>6.分享</p>
<p><img src="/pic/Datebase coursework/6.png" width="90%"></p>
<h2 id="九、总结"><a href="#九、总结" class="headerlink" title="九、总结"></a>九、总结</h2><p>本次课程设计开发了一个论坛微信小程序及对应的后台管理系统。在项目开发过程中,我对论坛类应用的功能需求进行了完整的分析,包括用户系统、帖子系统、评论系统等模块,并设计了数据库模型来满足这些功能需求。</p>
<p>通过绘制ER图,我设计出了六张关键表,包括用户表、帖子表、评论表等来存储系统核心数据。同时,针对可能存在的性能瓶颈,我分析了可以建立的数据库索引,以加速系统执行查询操作的速度。在保证原子性和一致性的前提下,我还研究了系统中的主要业务事务,如发帖、点赞等操作过程,以保证事务的正确性。</p>
<p>此外,我详细思考了系统的非功能需求,比如性能、安全性、可用性等方面的考虑。例如预计系统的初始规模和未来扩展性,保证系统能顺应业务增长趋势。我采用了JWT机制来进行用户认证和访问控制,保护系统安全。我还根据界面和交互的需要,设计了用户管理、帖子列表等关键页面的视图原型。</p>
<p>通过这次项目的开发,我对论坛类应用的整体功能和系统架构有了更深刻的理解。学会了绘制ER图设计数据库模型,进行性能和事务相关的分析,并考虑非功能需求。这些经验和技能对我今后的项目开发都大有帮助。总体来说,这个课程设计锻炼了我对系统进行全面需求分析和设计的能力,让我受益匪浅。</p>
<h2 id="附-参考文献"><a href="#附-参考文献" class="headerlink" title="附.	参考文献"></a>附.	参考文献</h2><p><a target="_blank" rel="noopener" href="https://uniapp.dcloud.net.cn/quickstart.html#">uni-app官网 (dcloud.net.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://springdoc.cn/spring-boot/">Spring Boot 中文文档 (springdoc.cn)</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/">Vue.js - 渐进式 JavaScript 框架 | Vue.js (vuejs.org)</a></p>
<p><a target="_blank" rel="noopener" href="https://element-plus.org/zh-CN/guide/quickstart.html">Element Plus (element-plus.org)</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://jcvvv.github.io">锦尘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jcvvv.github.io/2023/07/11/Database%20coursework/">https://jcvvv.github.io/2023/07/11/Database%20coursework/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jcvvv.github.io" target="_blank">锦尘</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><a class="post-meta__tags" href="/tags/%E8%AF%BE%E8%AE%BE/">课设</a></div><div class="post_share"><div class="social-share" data-image="/pic/cover/27.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/07/14/Principles%20of%20Marxism/"><img class="prev-cover" src="/pic/cover/28.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">马克思主义原理题库</div></div></a></div><div class="next-post pull-right"><a href="/2023/07/07/Get%20started%20with%20MongoDB/"><img class="next-cover" src="/pic/cover/26.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MongoDB入门</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">锦尘</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">33</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/JCvvv" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/475586532?spm_id_from=333.1007.0.0" target="_blank" title="Bilibili"><i class="fa-brands fa-bilibili"></i></a><a class="social-icon" href="mailto:1747624698@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E8%A6%81%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">课程要求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E8%AF%BE%E7%A8%8B%E5%AE%9A%E4%BD%8D"><span class="toc-number">1.1.</span> <span class="toc-text">数据库课程设计课程定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87"><span class="toc-number">1.2.</span> <span class="toc-text">数据库课程设计目标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E7%BB%A9%E8%AF%84%E5%AE%9A"><span class="toc-number">1.3.</span> <span class="toc-text">成绩评定</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%AF%BE%E7%A8%8B%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A"><span class="toc-number">2.</span> <span class="toc-text">微信小程序课程设计报告</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%B3%BB%E7%BB%9F%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0"><span class="toc-number">3.</span> <span class="toc-text">一、系统开发平台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A7%84%E5%88%92"><span class="toc-number">4.</span> <span class="toc-text">二、数据库规划</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E4%BB%BB%E5%8A%A1%E9%99%88%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">2.1  任务陈述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E4%BB%BB%E5%8A%A1%E7%9B%AE%E6%A0%87"><span class="toc-number">4.2.</span> <span class="toc-text">2.2  任务目标</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E7%B3%BB%E7%BB%9F%E5%AE%9A%E4%B9%89"><span class="toc-number">5.</span> <span class="toc-text">三、系统定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%B3%BB%E7%BB%9F%E8%BE%B9%E7%95%8C"><span class="toc-number">5.1.</span> <span class="toc-text">3.1  系统边界</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%94%A8%E6%88%B7%E8%A7%86%E5%9B%BE"><span class="toc-number">5.2.</span> <span class="toc-text">3.2  用户视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E9%9C%80%E6%B1%82%E5%88%86%E6%9E%90"><span class="toc-number">6.</span> <span class="toc-text">四、需求分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%94%A8%E6%88%B7%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">6.1.</span> <span class="toc-text">4.1 用户需求说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-1-%E6%95%B0%E6%8D%AE%E9%9C%80%E6%B1%82"><span class="toc-number">6.1.1.</span> <span class="toc-text">4.1.1 数据需求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2-%E4%BA%8B%E5%8A%A1%E9%9C%80%E6%B1%82"><span class="toc-number">6.1.2.</span> <span class="toc-text">4.1.2 事务需求</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E7%B3%BB%E7%BB%9F%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">6.2.</span> <span class="toc-text">4.2 系统需求说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E9%80%BB%E8%BE%91%E8%AE%BE%E8%AE%A1"><span class="toc-number">7.</span> <span class="toc-text">五、数据库逻辑设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-ER%E5%9B%BE"><span class="toc-number">7.1.</span> <span class="toc-text">5.1 ER图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%95%B0%E6%8D%AE%E5%AD%97%E5%85%B8"><span class="toc-number">7.2.</span> <span class="toc-text">5.2 数据字典</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%85%B3%E7%B3%BB%E8%A1%A8"><span class="toc-number">7.3.</span> <span class="toc-text">5.3 关系表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E6%95%B0%E6%8D%AE%E5%BA%93%E7%89%A9%E7%90%86%E8%AE%BE%E8%AE%A1"><span class="toc-number">8.</span> <span class="toc-text">六、数据库物理设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E7%B4%A2%E5%BC%95"><span class="toc-number">8.1.</span> <span class="toc-text">6.1 索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E8%A7%86%E5%9B%BE"><span class="toc-number">8.2.</span> <span class="toc-text">6.2 视图</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E5%AE%89%E5%85%A8%E6%9C%BA%E5%88%B6"><span class="toc-number">8.3.</span> <span class="toc-text">6.3 安全机制</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1"><span class="toc-number">9.</span> <span class="toc-text">七、应用程序设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">9.1.</span> <span class="toc-text">7.1 功能模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E4%BA%8B%E5%8A%A1%E8%AE%BE%E8%AE%A1"><span class="toc-number">9.2.</span> <span class="toc-text">7.2 事务设计</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E6%B5%8B%E8%AF%95%E5%92%8C%E8%BF%90%E8%A1%8C"><span class="toc-number">10.</span> <span class="toc-text">八、测试和运行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">11.</span> <span class="toc-text">九、总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-number">12.</span> <span class="toc-text">附.	参考文献</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/20/NoSqlExperiment/" title="NoSql实验报告">NoSql实验报告</a><time datetime="2023-11-19T16:00:00.000Z" title="发表于 2023-11-20 00:00:00">2023-11-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/11/01/Internship%20report/" title="认知实习汇总">认知实习汇总</a><time datetime="2023-10-31T16:00:00.000Z" title="发表于 2023-11-01 00:00:00">2023-11-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/31/Software/" title="软件工程作业合集">软件工程作业合集</a><time datetime="2023-10-30T16:00:00.000Z" title="发表于 2023-10-31 00:00:00">2023-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/30/SMS/" title="SMS短信嗅探实验报告">SMS短信嗅探实验报告</a><time datetime="2023-10-29T16:00:00.000Z" title="发表于 2023-10-30 00:00:00">2023-10-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/10/20/Data%20Mining/" title="数据挖掘实验报告">数据挖掘实验报告</a><time datetime="2023-10-19T16:00:00.000Z" title="发表于 2023-10-20 00:00:00">2023-10-20</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/foot.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 锦尘</div><div class="footer_custom_text">欢迎你，不知道从哪来的朋友</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>